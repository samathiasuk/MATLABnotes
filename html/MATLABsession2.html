<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>MATLAB Notes: Session 2 - Loops and conditions</title><meta name="generator" content="MATLAB 9.12"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2023-07-25"><meta name="DC.source" content="MATLABsession2.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>MATLAB Notes: Session 2 - Loops and conditions</h1><!--introduction--><p>Simon Mathias</p><p>Department of Engineering</p><p>Durham University</p><p><a href="https://samathiasuk.github.io/MATLABnotes/html/MATLABcontents.html">Return to main contents page</a></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Learning outcomes</a></li><li><a href="#2">Repeat operations using a "for" loop</a></li><li><a href="#7">Defining logical statements</a></li><li><a href="#16">Comparing arrays using logical statements.</a></li><li><a href="#22">Selecting data using logical statements</a></li><li><a href="#26">Using sum, mean, std, max and min</a></li><li><a href="#35">Generating annual rainfall from monthly rainfall</a></li><li><a href="#40">Classroom assignment</a></li></ul></div><h2 id="1">Learning outcomes</h2><p>At the end of the session you should be able to:</p><div><ul><li>Repeat operations using a "for" loop.</li><li>Define logical statements.</li><li>Compare arrays using logical statements.</li><li>Select data using logical statements.</li><li>Use sum, mean, std, max and min.</li></ul></div><h2 id="2">Repeat operations using a "for" loop</h2><p>Last week we learnt how to store and access data in arrays. We also learnt how to write long lists of instructions in a script file. Sometimes we want to do the same or a similar thing many times. Instead of repeating the code many times we can use a "for" loop.</p><p>Open MATLAB.</p><p>Click on "File", "New", "Script". The "Editor" window should now appear. Save the file as "MATLABsession2_Assignment.m" in the your "MATLABnotes" directory.</p><p>Type the following code in your new mfile and run (by pressing the green arrow at the top of the editor window).</p><pre class="codeinput"><span class="comment">%This is a script file containing examples from MATLAB session 2</span>
A=2;
A=A+5;
A=A+5;
A=A+5;
<span class="comment">%Display the value of A in the Command Window</span>
A
</pre><pre class="codeoutput">
A =

    17

</pre><p>What we have done is added 5 onto 2, three times. Another way of doing this is to use a for loop. Add the following to your mfile and run:</p><pre class="codeinput">A=2;
<span class="keyword">for</span> i=1:3
    <span class="comment">%Display the value of i in the Command Window</span>
    i
    <span class="comment">%Add 5 onto A and display in the Command Window</span>
    A=A+5
<span class="keyword">end</span>
</pre><pre class="codeoutput">
i =

     1


A =

     7


i =

     2


A =

    12


i =

     3


A =

    17

</pre><p>Exactly the same result is achieved. We have added 5 onto 2, three times. So what exactly is happening? We are stepping through a loop. In the first step, <tt>i=1</tt>. In the second step, <tt>i=2</tt>, in the third step, <tt>i=3</tt>. Then the loop is stopped. During each step 5 is added onto <tt>A</tt>.</p><p>Consider what happens when we type</p><pre class="codeinput">1:3
</pre><pre class="codeoutput">
ans =

     1     2     3

</pre><p>At the beginning of the loop we state <tt>for i=1:3</tt>. This tells MATLAB to make <tt>i=1</tt>, then <tt>2</tt> and finally <tt>3</tt>. Anything written in between the <tt>for</tt> and <tt>end</tt> is repeated until the sequence of <tt>i</tt> values is achieved.</p><p>Add the following to your mfile and run:</p><pre class="codeinput">A=2;
<span class="comment">%Add 5 on to A 1000 times</span>
<span class="keyword">for</span> i=1:1000
    A=A+5;
<span class="keyword">end</span>
<span class="comment">%Display the value of A in the Command Window</span>
A
</pre><pre class="codeoutput">
A =

        5002

</pre><p>We have repeated the calculation 1000 times!</p><h2 id="7">Defining logical statements</h2><p>Another important aspect of scientific programming concerns the application of logical statements.</p><p>Conditions usually contain the following:</p><pre class="codeinput"><span class="comment">% ==    equal to</span>
<span class="comment">% &lt;     less than</span>
<span class="comment">% &lt;=    less than or equal to</span>
<span class="comment">% &gt;     greater than</span>
<span class="comment">% &gt;=    greater than or equal to</span>
<span class="comment">% ~=    not equal to</span>
</pre><p>MATLAB denotes true as 1 and false as 0. For example, type the following into the Command Window:</p><pre class="codeinput">5&lt;6
</pre><pre class="codeoutput">
ans =

  logical

   1

</pre><p>Indeed it is "true" that 5&lt;6, therefore MATLAB returned a 1.</p><p>Type the following into the Command Window:</p><pre class="codeinput">5&gt;6
</pre><pre class="codeoutput">
ans =

  logical

   0

</pre><p>It is "false" that 5&gt;6, therefore MATLAB returned a 0.</p><p>Type the following into the Command Window</p><pre class="codeinput">x=[1 3 4 8 6 5 3 2 2]
x&lt;3
</pre><pre class="codeoutput">
x =

     1     3     4     8     6     5     3     2     2


ans =

  1&times;9 logical array

   1   0   0   0   0   0   0   1   1

</pre><p>The <tt>x&lt;3</tt> leads to a row of ones and zeros. There is a one for every value of x which is &lt; 3 and a zero for every value of x which is greater than or equal to 3.</p><p>Now type:</p><pre class="codeinput">x&lt;=3
</pre><pre class="codeoutput">
ans =

  1&times;9 logical array

   1   1   0   0   0   0   1   1   1

</pre><p>Now there is a one for every value of x which is less than or equal to 3 and a zero for every value of x which is &gt; 3.</p><p>What about if we want find out which values are equal to 3? Type</p><pre class="codeinput">x=[1 3 4 8 6 5 3 2 2]
x=3
</pre><pre class="codeoutput">
x =

     1     3     4     8     6     5     3     2     2


x =

     3

</pre><p>Oh dear, now x = 3. The makers of MATLAB realised this is the case and so introduced the <tt>==</tt> term.</p><p>Now type:</p><pre class="codeinput">x=[1 3 4 8 6 5 3 2 2]
x==3
</pre><pre class="codeoutput">
x =

     1     3     4     8     6     5     3     2     2


ans =

  1&times;9 logical array

   0   1   0   0   0   0   1   0   0

</pre><p>We get a one for every value of x which is equal to 3. Now type</p><pre class="codeinput">x~=3
</pre><pre class="codeoutput">
ans =

  1&times;9 logical array

   1   0   1   1   1   1   0   1   1

</pre><p>Now we get a one for every value of x which is not equal to 3.</p><h2 id="16">Comparing arrays using logical statements.</h2><p>We use these statements to compare different arrays. However, the arrays must be the same size. Type</p><pre class="codeinput">x=[1 3 4 8 6 5 3 2 2]
y=[3 3 1 5 3 2 8 4 2]
x==y
</pre><pre class="codeoutput">
x =

     1     3     4     8     6     5     3     2     2


y =

     3     3     1     5     3     2     8     4     2


ans =

  1&times;9 logical array

   0   1   0   0   0   0   0   0   1

</pre><p>We get a one for every value of x which is equal to the corresponding value of y.</p><p>Another two useful symbols are</p><pre class="codeinput"><span class="comment">% &amp;    and</span>
<span class="comment">% |    or</span>
</pre><p>Suppose we want to know about which values of x are equal to y and are also greater than 2. Type</p><pre class="codeinput">x==y &amp; x&gt;2
</pre><pre class="codeoutput">
ans =

  1&times;9 logical array

   0   1   0   0   0   0   0   0   0

</pre><p>Suppose we want to know which values of x are greater than y or equal to 2. Type</p><pre class="codeinput">x&gt;y | x==2
</pre><pre class="codeoutput">
ans =

  1&times;9 logical array

   0   0   1   1   1   1   0   1   1

</pre><p>We can make these statements as complicated as we like. For example:</p><pre class="codeinput">x&gt;y | x==2 | y==8
</pre><pre class="codeoutput">
ans =

  1&times;9 logical array

   0   0   1   1   1   1   1   1   1

</pre><h2 id="22">Selecting data using logical statements</h2><p>We can use logical statements to select data from arrays using the <tt>find</tt> command. Type</p><pre class="codeinput">x=[1 3 4 8 6 5 3 2 2]
y=[3 3 1 5 3 2 8 4 2]
condition=y&gt;2
ind=find(condition)
</pre><pre class="codeoutput">
x =

     1     3     4     8     6     5     3     2     2


y =

     3     3     1     5     3     2     8     4     2


condition =

  1&times;9 logical array

   1   1   0   1   1   0   1   1   0


ind =

     1     2     4     5     7     8

</pre><p>Now the vector <tt>ind</tt> contains the locations of those values of y which are greater than 2. Now type</p><pre class="codeinput">y(1,ind)
</pre><pre class="codeoutput">
ans =

     3     3     5     3     8     4

</pre><p>MATLAB has returned only those values of y which are greater than 2. Now type</p><pre class="codeinput">z=x(1,ind)
</pre><pre class="codeoutput">
z =

     1     3     8     6     3     2

</pre><p>We have now stored in the array, z, all the values of x whose corresponding values of y are greater than 2.</p><p>Interestingly, the above four lines of code can be combined into a single line as follows</p><pre class="codeinput">z=x(y&gt;2)
</pre><pre class="codeoutput">
z =

     1     3     8     6     3     2

</pre><h2 id="26">Using sum, mean, std, max and min</h2><p>MATLAB has many built in functions of interest. It would be impossible to discuss all of them today. But we can look at a few of interest as we go through the year.</p><p>Enter the following 2D array in the Command Window</p><pre class="codeinput">A=[2 5 8 6; 9 4 3 1; 7 12 10 11]
</pre><pre class="codeoutput">
A =

     2     5     8     6
     9     4     3     1
     7    12    10    11

</pre><p>The <tt>sum</tt> function adds up all of the elements of an array.</p><p><tt>sum(A,1)</tt> sums all the columns of A</p><pre class="codeinput">sum(A,1)
</pre><pre class="codeoutput">
ans =

    18    21    21    18

</pre><p><tt>sum(A,2)</tt> sums all the rows of A</p><pre class="codeinput">sum(A,2)
</pre><pre class="codeoutput">
ans =

    21
    17
    40

</pre><p><tt>sum(A(:),1)</tt> sums everything in A</p><pre class="codeinput">sum(A(:),1)
</pre><pre class="codeoutput">
ans =

    78

</pre><p>The <tt>mean</tt> functions works in exactly the same way but finds the arithmetic mean, respectively.</p><pre class="codeinput">mean(A,1)
mean(A,2)
mean(A(:),1)
</pre><pre class="codeoutput">
ans =

     6     7     7     6


ans =

    5.2500
    4.2500
   10.0000


ans =

    6.5000

</pre><p>Three other functions also of interest are <tt>max</tt>, <tt>min</tt> and <tt>std</tt>.</p><p><tt>max(A,[],1)</tt> finds the maximum value in each column of A</p><pre class="codeinput">max(A,[],1)
</pre><pre class="codeoutput">
ans =

     9    12    10    11

</pre><p><tt>max(A,[],2)</tt> finds the maximum value in each row of A</p><pre class="codeinput">max(A,[],2)
</pre><pre class="codeoutput">
ans =

     8
     9
    12

</pre><p><tt>max(A(:),[],1)</tt> finds the maximum value in all of A</p><pre class="codeinput">max(A(:),[],1)
</pre><pre class="codeoutput">
ans =

    12

</pre><p>Note the inclusion of the <tt>[]</tt>. This is needed as <tt>max</tt> has other options, which you are unlikely to consider as you start with MATLAB. Therefore we are leaving that argument as empty, i.e., <tt>[]</tt>.</p><p>The functions <tt>min</tt> and <tt>std</tt> work in exactly the same way as <tt>max</tt> but find the minimum value and the standard deviation, respectively.</p><p>To find out more about any function simply type <tt>help</tt> followed by the function name in the Command Window. Try typing <tt>help min</tt> in the Command Window.</p><h2 id="35">Generating annual rainfall from monthly rainfall</h2><p>We will now revisit the Durham weather data set from last week. Recall that the data is recorded for every month from 1880 to 2012. The rainfall data represents the total depth of rainfall that landed during each month. It is not so helpful to look at the statistics of monthly data because of the associated effects of seasonality on rain. Instead it would be more interesting to study the total rainfall that landed over the year. In this exercise we will generate a simple mfile to automatically calculate the annual rainfall for each year from 1880 to 2012.</p><p>Click on "File", "New", "Script". The "Editor" window should now appear. Save the file as "MATLABsession2_Assignment.m" in the your "MATLABnotes" directory.</p><p>At the top of the window type the following:</p><pre class="codeinput"><span class="comment">%This is a script to calculate annual rainfall at Durham from a monthly</span>
<span class="comment">%rainfall time-series</span>

<span class="comment">%Import Durham weather data from excel</span>
data=readmatrix(<span class="string">'DurhamWeather.xlsx'</span>,<span class="string">'Sheet'</span>,<span class="string">'Sheet1'</span>);

<span class="comment">%Extract years and store in yyyy</span>
yyyy=data(:,1);

<span class="comment">%Extract months and store in mm</span>
mm=data(:,2);

<span class="comment">%Extract monthly rainfall and store in rain</span>
rain=data(:,6);

<span class="comment">%Store the first year's worth of data in a separate array and display</span>
rain1880=rain(1:12,1)
</pre><pre class="codeoutput">
rain1880 =

   13.5000
   44.3000
   32.5000
   51.5000
   38.1000
   66.5000
  106.0000
   49.1000
  128.6000
  150.0000
   56.7000
   70.2000

</pre><p>Press the green arrow to run. You should now see the first 12 rainfall data in the Command Window. Compare with the excel spreadsheet to verify that these are the monthly rainfall data for the year of 1880.</p><p>To find the sum for this year, add the following code to your mfile and run:</p><pre class="codeinput">sum(rain1880,1)
</pre><pre class="codeoutput">
ans =

  807.0000

</pre><p>But what if we had to find the sum of every year?</p><p>Lets go back to 1880. Add the following code to your mfile and run:</p><pre class="codeinput"><span class="comment">%Choose year of interest</span>
YEAR=1880;
<span class="comment">%Obtain the locations of all yyyy which are equal to value of YEAR</span>
condition=yyyy==YEAR;
ind=find(condition);
<span class="comment">%Store all rain data for year of interest in rainYEAR</span>
rainYEAR=rain(ind,1);
<span class="comment">%Calculate annual rainfall for that year by summation</span>
rainANNUAL=sum(rainYEAR,1)
</pre><pre class="codeoutput">
rainANNUAL =

  807.0000

</pre><p>We have generalised what we wanted to do for any value stored in <tt>YEAR</tt>.</p><p>Now to look at years from 1880 to 2012 we can use a for loop. Add the following code to your mfile and run:</p><pre class="codeinput"><span class="comment">%Generate a column vector of the years of interest</span>
YEAR=[1880:2012]';
<span class="comment">%Count how many years we are interested in and store in M</span>
M=numel(YEAR);

<span class="comment">%Initialise rainANNUAL array before allocating values</span>
rainANNUAL=zeros(M,1);
<span class="comment">%Perform a loop for each year of interest</span>
<span class="keyword">for</span> i=1:M
    <span class="comment">%Obtain the locations of all yyyy which are equal to the ith YEAR</span>
    condition=yyyy==YEAR(i,1);
    ind=find(condition);
    <span class="comment">%Store all rain data for year of interest in rain YEAR</span>
    rainYEAR=rain(ind,1);
    <span class="comment">%Calculate annual rainfall for that year by summation and store in the</span>
    <span class="comment">%ith value of rainANNUAL</span>
    rainANNUAL(i,1)=sum(rainYEAR,1);
<span class="keyword">end</span>
</pre><p>Interestingly, the code would work just as well without the <tt>rainANNUAL=zeros(M,1)</tt> step. However, MATLAB will compute the process faster if you specify the size of an array before allocating values in loops. The <tt>zeros(M,1)</tt> command simply gives an array of zeros with M rows and 1 column.</p><h2 id="40">Classroom assignment</h2><p>1) Extend your code further by finding the a) maximum, b) minimum, c) mean and d) standard deviation of the annual rainfall in Durham for the period 1980 to 2011, respectively.</p><p>2) Extend the code to count how many years during that period had above average rainfall.</p><p>3) Use MATLAB to generate an appropriately labelled bar chart displaying the annual rainfall for the period 1980 to 2011. Type <tt>help bar</tt> to find out how to do this. Hint: it is very similar to using the <tt>plot</tt> command you used last week. Use the bar chart to check your ansers to the previous two tasks.</p><p>An example MATLAB code, containing all of the instructions requested above, is given in <a href="https://samathiasuk.github.io/MATLABnotes/MATLABsession2_Assignment.m">MATLABsession2_Assignment.m</a>.</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2022a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% MATLAB Notes: Session 2 - Loops and conditions
%
% Simon Mathias
%
% Department of Engineering
%
% Durham University
%
% <https://samathiasuk.github.io/MATLABnotes/html/MATLABcontents.html Return to main contents page>
%
%% Learning outcomes
%
% At the end of the session you should be able to:
%
% * Repeat operations using a "for" loop.
% * Define logical statements.
% * Compare arrays using logical statements.
% * Select data using logical statements.
% * Use sum, mean, std, max and min.
%
%% Repeat operations using a "for" loop
%
% Last week we learnt how to store and access data in arrays. We also
% learnt how to write long lists of instructions in a script file.
% Sometimes we want to do the same or a similar thing many times. 
% Instead of repeating the code many times we can use a "for" loop.
%
% Open MATLAB.
%
% Click on "File", "New", "Script". The "Editor" window should now appear.
% Save the file as "MATLABsession2_Assignment.m" in the your "MATLABnotes"
% directory.
%
% Type the following code in your new mfile and run (by pressing the green
% arrow at the top of the editor window).

%This is a script file containing examples from MATLAB session 2
A=2;
A=A+5;
A=A+5;
A=A+5;
%Display the value of A in the Command Window
A
 
%%
% What we have done is added 5 onto 2, three times. Another way of doing
% this is to use a for loop. Add the following to your mfile and run:
 
A=2;
for i=1:3
    %Display the value of i in the Command Window
    i
    %Add 5 onto A and display in the Command Window
    A=A+5
end
 
%%
% Exactly the same result is achieved. We have added 5 onto 2, three times.
% So what exactly is happening? We are stepping through a loop. In the
% first step, |i=1|. In the second step, |i=2|, in the third step, |i=3|.
% Then the loop is stopped. During each step 5 is added onto |A|.
%
% Consider what happens when we type
 
1:3
 
%%
% At the beginning of the loop we state |for i=1:3|. This tells
% MATLAB to make |i=1|, then |2| and finally |3|. Anything written
% in between the |for| and |end| is repeated until the sequence of |i|
% values is achieved.
%
% Add the following to your mfile and run:
 
A=2;
%Add 5 on to A 1000 times
for i=1:1000
    A=A+5;
end
%Display the value of A in the Command Window
A
 
%%
% We have repeated the calculation 1000 times!
%
%% Defining logical statements
%
% Another important aspect of scientific programming concerns the application
% of logical statements.
%
% Conditions usually contain the following:
 
% ==    equal to
% <     less than
% <=    less than or equal to
% >     greater than
% >=    greater than or equal to
% ~=    not equal to
 
%%
% MATLAB denotes true as 1 and false as 0. For example, type the following
% into the Command Window:
 
5<6
 
%%
% Indeed it is "true" that 5<6, therefore MATLAB returned a 1.
%
% Type the following into the Command Window:
 
5>6
 
%%
% It is "false" that 5>6, therefore MATLAB returned a 0.
%
% Type the following into the Command Window
 
x=[1 3 4 8 6 5 3 2 2]
x<3
 
%%
% The |x<3| leads to a row of ones and zeros. There is a one for every
% value of x which is < 3 and a zero for every value of x which is greater 
% than or equal to 3.
%
% Now type: 
 
x<=3
 
%%
% 
% Now there is a one for every value of x which is less than or equal to 3 
% and a zero for every value of x which is > 3.
%
% What about if we want find out which values are equal to 3? Type

x=[1 3 4 8 6 5 3 2 2]
x=3
 
%%
% Oh dear, now x = 3. The makers of MATLAB realised this is the case and 
% so introduced the |==| term.
%
% Now type:
 
x=[1 3 4 8 6 5 3 2 2]
x==3
 
%%
% We get a one for every value of x which is equal to 3. Now type
 
x~=3
 
%%
% Now we get a one for every value of x which is not equal to 3.
%
%% Comparing arrays using logical statements.
%
% We use these statements to compare different arrays. However, 
% the arrays must be the same size. Type
 
x=[1 3 4 8 6 5 3 2 2]
y=[3 3 1 5 3 2 8 4 2]
x==y
 
%%
% We get a one for every value of x which is equal to the corresponding 
% value of y.
 
 
%%
% Another two useful symbols are
 
% &    and
% |    or
 
%%
% Suppose we want to know about which values of x are equal to y and are
% also greater than 2. Type
 
x==y & x>2
 
%%
% Suppose we want to know which values of x are greater than y or equal to
% 2. Type
 
x>y | x==2
 
%%
% We can make these statements as complicated as we like. 
% For example:
 
x>y | x==2 | y==8
 
%% Selecting data using logical statements
%
% We can use logical statements to select data from arrays using the |find|
% command. Type
 
x=[1 3 4 8 6 5 3 2 2]
y=[3 3 1 5 3 2 8 4 2]
condition=y>2
ind=find(condition)
 
%%
% Now the vector |ind| contains the locations of those values of y which
% are greater than 2. Now type 
 
y(1,ind)
 
%%
% MATLAB has returned only those values of y which are greater than 2. Now
% type
 
z=x(1,ind)
 
%%
% We have now stored in the array, z, all the values of x whose 
% corresponding values of y are greater than 2.
%
% Interestingly, the above four lines of code can be combined into a single line
% as follows

z=x(y>2)

%% Using sum, mean, std, max and min
%
% MATLAB has many built in functions of interest. It would be impossible to
% discuss all of them today. But we can look at a few of interest as we go through
% the year.
%
% Enter the following 2D array in the Command Window
 
A=[2 5 8 6; 9 4 3 1; 7 12 10 11]
 
%%
% The |sum| function adds up all of the elements of an array.
%
% |sum(A,1)| sums all the columns of A
 
sum(A,1)
 
%%
% |sum(A,2)| sums all the rows of A
 
sum(A,2)
 
%%
% |sum(A(:),1)| sums everything in A
 
sum(A(:),1)
 
%%
% The |mean| functions works in exactly the same way but finds the
% arithmetic mean, respectively.
 
mean(A,1)
mean(A,2)
mean(A(:),1)
 
%%
% Three other functions also of interest are |max|, |min| and |std|.
%
% |max(A,[],1)| finds the maximum value in each column of A
 
max(A,[],1)
 
%%
% |max(A,[],2)| finds the maximum value in each row of A
 
max(A,[],2)
 
%%
% |max(A(:),[],1)| finds the maximum value in all of A
 
max(A(:),[],1)
 
%%
% Note the inclusion of the |[]|. This is needed as |max| has other
% options, which you are unlikely to consider as you start with MATLAB.
% Therefore we are leaving that argument as empty, i.e., |[]|.
%
% The functions |min| and |std| work in exactly the same way as |max| but
% find the minimum value and the standard deviation, respectively.
%
% To find out more about any function simply type |help| followed by the
% function name in the Command Window. Try typing |help min| in the Command
% Window.
%
%% Generating annual rainfall from monthly rainfall
%
% We will now revisit the Durham weather data set from last week. Recall
% that the data is recorded for every month from 1880 to 2012. The rainfall
% data represents the total depth of rainfall that landed during each
% month. It is not so helpful to look at the statistics of monthly data
% because of the associated effects of seasonality on rain. Instead it
% would be more interesting to study the total rainfall that landed over
% the year. In this exercise we will generate a simple mfile to
% automatically calculate the annual rainfall for each year from 1880 to
% 2012.
%
% Click on "File", "New", "Script". The "Editor" window should now appear.
% Save the file as "MATLABsession2_Assignment.m" in the your "MATLABnotes"
% directory.
%
% At the top of the window type the following:

%This is a script to calculate annual rainfall at Durham from a monthly
%rainfall time-series

%Import Durham weather data from excel
data=readmatrix('DurhamWeather.xlsx','Sheet','Sheet1');

%Extract years and store in yyyy
yyyy=data(:,1);

%Extract months and store in mm
mm=data(:,2);

%Extract monthly rainfall and store in rain
rain=data(:,6);

%Store the first year's worth of data in a separate array and display
rain1880=rain(1:12,1)

%%
% Press the green arrow to run. You should now see the first 12 rainfall
% data in the Command Window. Compare with the excel spreadsheet to verify
% that these are the monthly rainfall data for the year of 1880.
%
% To find the sum for this year, add the following code to your mfile and
% run:

sum(rain1880,1)

%%
% But what if we had to find the sum of every year?
%
% Lets go back to 1880. Add the following code to your mfile and run:

%Choose year of interest
YEAR=1880;
%Obtain the locations of all yyyy which are equal to value of YEAR
condition=yyyy==YEAR;
ind=find(condition);
%Store all rain data for year of interest in rainYEAR
rainYEAR=rain(ind,1);
%Calculate annual rainfall for that year by summation
rainANNUAL=sum(rainYEAR,1)

%%
% We have generalised what we wanted to do for any value stored in |YEAR|.
%
% Now to look at years from 1880 to 2012 we can use a for loop. Add the
% following code to your mfile and run:

%Generate a column vector of the years of interest
YEAR=[1880:2012]';
%Count how many years we are interested in and store in M
M=numel(YEAR);

%Initialise rainANNUAL array before allocating values
rainANNUAL=zeros(M,1);
%Perform a loop for each year of interest
for i=1:M
    %Obtain the locations of all yyyy which are equal to the ith YEAR
    condition=yyyy==YEAR(i,1);
    ind=find(condition);
    %Store all rain data for year of interest in rain YEAR
    rainYEAR=rain(ind,1);
    %Calculate annual rainfall for that year by summation and store in the
    %ith value of rainANNUAL
    rainANNUAL(i,1)=sum(rainYEAR,1);
end

%%
% Interestingly, the code would work just as well without the
% |rainANNUAL=zeros(M,1)| step. However, MATLAB
% will compute the process faster if you specify the size of an array
% before allocating values in loops. The |zeros(M,1)| command simply gives
% an array of zeros with M rows and 1 column.

%% Classroom assignment
%
% 1) Extend your code further by finding the a) maximum, b) minimum, c) mean 
% and d) standard deviation of the annual rainfall in Durham for the 
% period 1980 to 2011, respectively.
%
% 2) Extend the code to count how many years during that period had
% above average rainfall.
%
% 3) Use MATLAB to generate an appropriately labelled bar chart
% displaying the annual rainfall for the period 1980 to 2011. Type |help
% bar| to find out how to do this. Hint: it is very similar to using the
% |plot| command you used last week. Use the bar chart to check your ansers
% to the previous two tasks.
%
% An example MATLAB code, containing all of the instructions requested
% above, is given in <https://samathiasuk.github.io/MATLABnotes/MATLABsession2_Assignment.m MATLABsession2_Assignment.m>.
##### SOURCE END #####
--></body></html>
